<!DOCTYPE html>
<html lang="en">

  <%= erb :header %>
  <%= erb :nav %>

  <body class="theme-invert">

    <!-- Main (Home) section -->
    <section class="section" id="head">
      <div class="container">

        <div class="row">
          <div class="col-md-10 col-lg-10 col-md-offset-1 col-lg-offset-1 text-center">

            <div id="autoupdate-widget">
              <%= erb :widget %>
            </div>

            <div class="form-group">
              <input type="text" class="form-control" name="search_box" id="search_box" spellcheck="false" placeholder="Search for.." />
            </div>

          </div>
        </div>

      </div>
    </section>

    <section class="section" id="about">
      <div class="container">

        <h2 class="text-center title">About</h2>
        <div class="row">
          <div class="col-sm-offset-4 col-sm-4 col-sm-offset-4">
            <p>
              Search SoundCloud instantly. This site is the result of mild imsomnia.
            </p>

            <p>
              Source code at <a href="http://github.com/infinitus/soundcloud-instant">http://github.com/infinitus/soundcloud-instant</a>
            </p>

            <p>
              The wonderful design template of this site is by Sergey Pozhilo.
              <a href="http://www.gettemplate.com/demo/magister">http://www.gettemplate.com/demo/magister</a>
            </p>
          </div>
          <div class="col-sm-4">
          </div>
        </div>
      </div>
    </section>

    <!-- GitHub fork banner -->
    <a href="https://github.com/infinitus/soundcloud-instant"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

    <!-- Magister scripts -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="assets/js/modernizr.custom.72241.js"></script>
    <script src="assets/js/magister.js"></script>

    <!-- AJAX for instant search -->
    <script type="text/javascript" charset="utf-8">
      document.getElementById("search_box").onkeyup = function(event) {
        var query = document.getElementById("search_box").value.trim();
        if (query == "" || localStorage.getItem("query") == query) { return; }
        localStorage.setItem("query", query);

        instantSearch(query);
      }

      var xhr;
      var _url = "<%= @url %>";

      function instantSearch(query) {
        if (xhr && xhr.readyState != 4) { xhr.abort(); }
        xhr = $.post(_url, { q: query }, function(widget_html) {
                $('#autoupdate-widget').html(widget_html);
              });
      }
    </script>

    <!-- GA -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-24225639-2', 'auto');
      ga('send', 'pageview');

    </script>

  </body>
</html>
